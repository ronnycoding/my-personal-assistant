# Financial Analysis Notebook Template

This template defines the standard structure for all personal finance notebooks.

## Notebook Metadata

```json
{
  "notebook_name": "{{notebook_name}}",
  "created_date": "{{created_date}}",
  "currency": "USD",
  "version": "1.0"
}
```

## Cell Structure

### Cell 1: Setup & Imports (Code)

```python
# Personal Finance Analysis - {{notebook_name}}
# Created: {{created_date}}

import sys
from pathlib import Path

# Add finance_utils to path
finance_utils_path = Path('.claude/finance-notebooks')
if str(finance_utils_path) not in sys.path:
    sys.path.insert(0, str(finance_utils_path))

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from datetime import datetime, timedelta

# Import finance utilities
from finance_utils import *

# Configure pandas display
pd.set_option('display.max_columns', None)
pd.set_option('display.max_rows', 100)
pd.set_option('display.float_format', lambda x: f'${x:,.2f}' if abs(x) > 0.01 else '$0.00')

# Configure matplotlib
plt.style.use('seaborn-v0_8-darkgrid')
sns.set_palette("husl")

print(f"✓ Personal Finance Analysis - {{notebook_name}}")
print(f"✓ Initialized on {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
```

### Cell 2: Configuration (Code)

```python
# Notebook Configuration
NOTEBOOK_NAME = "{{notebook_name}}"
CURRENCY = "USD"
DATE_FORMAT = "%Y-%m-%d"
CREATED_DATE = "{{created_date}}"

# Display configuration
print(f"Notebook: {NOTEBOOK_NAME}")
print(f"Currency: {CURRENCY}")
print(f"Created: {CREATED_DATE}")
```

### Cell 3: Data Schemas (Markdown)

```markdown
## Data Schemas

### Transaction Schema
| Column | Type | Description |
|--------|------|-------------|
| date | datetime64 | Transaction date |
| description | str | Transaction description |
| amount | float64 | Transaction amount (positive=income, negative=expense) |
| category | str | Auto-assigned category |
| account | str | Account name (checking, savings, credit, etc.) |
| type | str | Transaction type (debit, credit, transfer) |

### Account Schema
| Column | Type | Description |
|--------|------|-------------|
| name | str | Account name |
| type | str | Account type (asset, liability) |
| balance | float64 | Current balance |
| currency | str | Currency code |
```

### Cell 4: Transaction Data (Code)

```python
# Transaction Data
# This cell will be populated by /finance import command

transactions_df = pd.DataFrame(columns=['date', 'description', 'amount', 'category', 'account', 'type'])

print(f"Transactions loaded: {len(transactions_df)}")
if len(transactions_df) > 0:
    print(f"Date range: {transactions_df['date'].min()} to {transactions_df['date'].max()}")
    print(f"Total transactions: {len(transactions_df)}")
```

### Cell 5: Account Balances (Code)

```python
# Account Balances
# Update this cell with your current account balances

accounts_df = pd.DataFrame({
    'name': ['Checking', 'Savings', 'Credit Card', 'Student Loan'],
    'type': ['asset', 'asset', 'liability', 'liability'],
    'balance': [0.0, 0.0, 0.0, 0.0],
    'currency': ['USD', 'USD', 'USD', 'USD']
})

print("Current Account Balances:")
print(accounts_df)
```

### Cell 6: Data Processing (Markdown)

```markdown
## Data Processing

This section contains data cleaning, validation, and categorization logic.
```

### Cell 7: Financial Analysis (Markdown)

```markdown
## Financial Analysis

This section contains financial metrics, KPIs, and analysis results.

Analysis will be populated by `/finance analyze` command.
```

### Cell 8: Analysis Results Placeholder (Code)

```python
# Financial Analysis Results
# This cell will be populated by /finance analyze command

analysis_results = {
    'total_income': 0.0,
    'total_expenses': 0.0,
    'net_cashflow': 0.0,
    'savings_rate': 0.0,
    'financial_health_score': 0
}

print("Analysis results will appear here after running /finance analyze")
```

### Cell 9: Projections (Markdown)

```markdown
## Financial Projections

This section contains cash flow projections, savings goals, and forecasts.

Projections will be populated by `/finance project` command.
```

### Cell 10: Projection Results Placeholder (Code)

```python
# Financial Projections
# This cell will be populated by /finance project command

projections_df = pd.DataFrame(columns=['month', 'income', 'expenses', 'cashflow', 'scenario'])

print("Projections will appear here after running /finance project")
```

### Cell 11: Visualizations (Markdown)

```markdown
## Visualizations

This section contains charts, graphs, and visual reports.

Visualizations will be generated by `/finance report` command.
```

### Cell 12: Advisory Recommendations (Markdown)

```markdown
## AI Financial Advisory

This section contains personalized financial recommendations and insights.

Recommendations will be generated by `/finance advise` command.
```

### Cell 13: Advisory Results Placeholder (Code)

```python
# AI Financial Recommendations
# This cell will be populated by /finance advise command

recommendations = []

print("AI recommendations will appear here after running /finance advise")
```

### Cell 14: Notes & Summary (Markdown)

```markdown
## Notes & Summary

### Key Insights
- Insight 1
- Insight 2
- Insight 3

### Action Items
- [ ] Action item 1
- [ ] Action item 2
- [ ] Action item 3

### Monthly Goals
- Goal 1
- Goal 2
- Goal 3
```

## Usage Notes

1. **Do not modify** cells 1-3 (Setup, Configuration, Schemas) - these are standard
2. **Update** Cell 4 via `/finance import` command
3. **Update** Cell 5 manually with your current account balances
4. **Analysis** cells (8, 10, 13) are auto-populated by finance commands
5. **Notes** cell (14) is for your personal observations

## Cell Execution Order

1. Always run Cell 1 (Setup) first
2. Run Cell 2 (Configuration) second
3. Import data via `/finance import` (populates Cell 4)
4. Update account balances in Cell 5
5. Run analysis commands as needed

## Maintenance

- Update account balances regularly (weekly/monthly)
- Import new transactions as they occur
- Re-run analyses after importing new data
- Archive old notebooks annually
